---
globs: "src/config/*.ts"
---
# Async Messaging README Auto-update

**Trigger:** When RabbitMQ config is modified, compare and create or replace the README.md "Async Messaging" section to be synced with latest values

**Data Source:** Extract data from the `rabbitmq` attribute containing `exchange`, `publications`, `subscriptions`, and `queues` configuration.

---

## ðŸ“Š Generated Content

### 1. Mermaid Diagram
**Purpose:** Visual representation of message flow: `input exchange â†’ bindings â†’ queue â†’ subscription â†’ consumer â†’ publication â†’ routing key â†’ output exchange`

#### Diagram Specifications
- âœ… Use arrows to show message flow direction from left to right
- âœ… Include bindings and routing keys as labels on arrows  
- âœ… Group related elements in subgraphs
- âœ… Ensure mermaid syntax is valid

#### Diagram example
```markdown
### Messaging Diagram
```mermaid
graph LR
    subgraph InputExchange["Input Exchange"]
        InputExchangeNode["internal"]
    end
    subgraph Queues["Queues"]
        Queue1["platform-adapter:entity:persisted"]
    end
    subgraph Subscriptions["Subscriptions"]
        Sub1["entity_persisted"]
    end
    subgraph Consumer["Consumer"]
        ConsumerTag["pd-service-platform-api"]
    end
    subgraph Publications["Publications"]
        Pub1["entity_persisted"]
    end
    subgraph OutputExchange["Output Exchange"]
        OutputExchangeNode["internal"]
    end
    %% Input flow
    InputExchangeNode -->|platform-adapter.v1.entity.persisted| Queue1
    Queue1 --> Sub1
    Sub1 --> ConsumerTag
    %% Output flow
    ConsumerTag --> Pub1
    Pub1 -->|platform-api.v1.entity.persisted| OutputExchangeNode
    
    classDef dashedBox fill:transparent,stroke:#666,stroke-width:2px,stroke-dasharray: 5 5
    class InputExchange,Queues,Subscriptions,Publications,OutputExchange dashedBox
```

### 2. Queue Configuration Table
**Purpose:** Display a table with subscription, exchange, binding and queue name columns

### 3. Publications Configuration Table  
**Purpose:** Display a table with publication, exchange and routing key columns
